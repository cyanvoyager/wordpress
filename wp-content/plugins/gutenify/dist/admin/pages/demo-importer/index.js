(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,n=window.wp.apiFetch;var l=e.n(n);const o=window.wp.components,r=window.wp.i18n,a=window.lodash,s=window.wp.blockEditor,i=function(e,t){var n,l,o,r,i,m,c;let u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const p=null!=t&&null!==(n=t.typography)&&void 0!==n&&n.fontFamilySlug?t.typography.fontFamilySlug:"",d=null!=t&&null!==(l=t.elements)&&void 0!==l&&null!==(o=l.headings)&&void 0!==o&&null!==(r=o.typography)&&void 0!==r&&r.fontFamilySlug?t.elements.headings.typography.fontFamilySlug:"",g=(0,a.has)(e,"blocks.core/button.color.background")?e.blocks["core/button"].color.background:"",y=(0,a.has)(e,"blocks.core/button.color.text")?e.blocks["core/button"].color.text:"",h=null!=t&&null!==(i=t.elements)&&void 0!==i&&null!==(m=i.linkHover)&&void 0!==m&&null!==(c=m.color)&&void 0!==c&&c.text?t.elements.linkHover.color.text:"",_=(0,a.has)(t,"blocks.core/button.hover.color.text")?t.blocks["core/button"].hover.color.text:"",E=(0,a.has)(t,"blocks.core/button.hover.color.background")?t.blocks["core/button"].hover.color.background:"";let f="",b="";if(p){const e=(0,a.find)(window._gutenify_vars.font_families,(e=>{let{slug:t}=e;return t===p}));e&&(b+=`${u?".editor-styles-wrapper ":"body"} {\n\t\t\t\tfont-family: ${e.fontFamily};\n\t\t\t}`)}if(d){const e=(0,a.find)(window._gutenify_vars.font_families,(e=>{let{slug:t}=e;return t===d}));e&&(f=`h1,\n\t\t\th2,\n\t\t\th3,\n\t\t\th4,\n\t\t\th5,\n\t\t\th6{\n\t\t\t\tfont-family: ${e.fontFamily};\n\t\t\t}`,b+=(0,s.transformStyles)([{css:f}],u?".editor-styles-wrapper":""))}return f=`.woocommerce #respond input#submit,\n\t.woocommerce a.button,\n\t.woocommerce button.button,\n\t.woocommerce input.button,\n\t.woocommerce #respond input#submit.alt,\n\t.woocommerce a.button.alt,\n\t.woocommerce button.button.alt,\n\t.woocommerce input.button.alt{\n\t\t${y?"color: var(--wp--custom--core-button--color);":""}\n\t\t${g?"background-color: var(--wp--custom--core-button--color--background);":""}\n\t}`,b+=(0,s.transformStyles)([{css:f}],u?".editor-styles-wrapper":""),g&&(f=`.is-style-outline > .wp-block-button__link:not(.has-background){\n\t\t\t${g?"background-color: transparent;":""}\n\t\t}`,b+=(0,s.transformStyles)([{css:f}],u?".editor-styles-wrapper":"")),b+=`${u?".editor-styles-wrapper ":""} .wp-block-button.is-style-outline > .wp-block-button__link:not(.has-text-color){\n\t\t${y?`color: ${y};`:""}\n\t}`,f=`.wp-block-button .wp-block-button__link.wp-block-button__link:not(.has-background):not(.has-text-color):hover, .woocommerce #respond input#submit,\n\t.wp-block-button.is-style-outline .wp-block-button__link.wp-block-button__link:not(.has-background):not(.has-text-color):hover,\n\t.woocommerce a.button:hover,\n\t.woocommerce button.button:hover,\n\t.woocommerce input.button:hover,\n\t.woocommerce #respond input#submit.alt:hover,\n\t.woocommerce a.button.alt:hover,\n\t.woocommerce button.button.alt:hover,\n\t.woocommerce input.button.alt:hover{\n\t\t${_?`color: ${_};`:""}\n\t\t${E?`background-color: ${E};`:""}\n\t}`,b+=(0,s.transformStyles)([{css:f}],u?".editor-styles-wrapper":""),b+=`${u?".editor-styles-wrapper ":""} a:hover,a:active{\n\t\t${h?`color: ${h};`:""}\n\t}`,b},{pluginMainSlug:m,pluginMainFunctionPrefix:c}={pluginMainSlug:"gutenify",pluginMainCamelCaseName:"gutenify",pluginMainFunctionPrefix:"gutenify"},{pro_license_status:u,site_url:p}=window[`_${c}_vars`];(0,t.render)((0,t.createElement)((()=>{const[e,n]=(0,t.useState)([]),[a,s]=(0,t.useState)([]),[m,c]=(0,t.useState)([]),[d,g]=(0,t.useState)([]),[y,h]=(0,t.useState)(!1),_=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n(!0),l()({path:`/gutenify/v1/get_theme_demo_list?force=${e}`}).then((e=>{if(null!=e&&e.success&&null!=e&&e.success&&null!=e&&e.response&&e.response.length>0){const t=e.response.map((e=>({...e})));s([...t]),c([...t])}n(!1)}))},E=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];l()({path:`/gutenify/v1/get_demo_categories?force=${e}`}).then((e=>{if(null!=e&&e.success&&null!=e&&e.success&&null!=e&&e.response&&e.response.length>0){const t=e.response.map((e=>({...e})));g([...t])}}))};(0,t.useEffect)((()=>{_(),E()}),[]);const[f,b]=(0,t.useState)(!1),w=()=>b(!1),[v,k]=(0,t.useState)(!1),C=()=>k(!1),[N,S]=(0,t.useState)(!1),[$,O]=(0,t.useState)(!1),[P,x]=(0,t.useState)(!1),[I,F]=(0,t.useState)(!1),[q,T]=(0,t.useState)(!1),[H,M]=(0,t.useState)({type:"all"}),D=e=>{const t={...H,...e};M(t);const n=a.filter((e=>{let n=!1;if(null!=t&&t.type&&"all"===t.type&&(n=!0),null!=t&&t.type&&"free"===t.type&&!1===e.is_pro&&(n=!0),null!=t&&t.type&&"pro"===t.type&&!0===e.is_pro&&(n=!0),!0===n&&null!=t&&t.cat&&t.cat.length>0){const l=[];e.categories.length>0&&e.categories.forEach((e=>{l.push(t.cat.includes(e.slug))})),n=l.includes(!0)}return n}));c([...n])},A=e=>{h(!0),l()({path:"/gutenify/v1/get_theme_import_demo",method:"POST",data:{name:e}}).then((t=>{null!=t&&t.proceed&&"true"===t.proceed||null!=t&&t.status&&"newAJAX"===t.status?A(e):null!=t&&t.response&&!0===t.response&&(e=>{l()({path:"/gutenify/v1/get_theme_import_demo_styles",method:"POST",data:{name:e}}).then((t=>{if(null!=t&&t.success&&!0===t.success){var n,o,r,a;const s=null!=t&&null!==(n=t.response)&&void 0!==n&&null!==(o=n.core)&&void 0!==o&&o.styles?t.response.core.styles:{},m=null!=t&&null!==(r=t.response)&&void 0!==r&&null!==(a=r.plugin)&&void 0!==a&&a.styles?t.response.plugin.styles:{},c=i(s,m),u=i(s,m,!0);l()({path:"/gutenify/v1/update_global_styles",method:"POST",data:{css:c,adminCss:u}}).then((()=>{(e=>{l()({path:"/gutenify/v1/get_theme_import_demo_set_pages",method:"POST",data:{name:e}}).then((e=>{null!=e&&e.success&&!0===e.success&&(C(),S(!0))}))})(e)})).catch((()=>{}))}}))})(e)}))};return(0,t.createElement)("div",{className:"gutenify-demo-importer-wrap "+(e?"gutenify-demo-importer-busy":"")},(0,t.createElement)("div",{className:"gutenify-demo-importer-topbar"},(0,t.createElement)("div",null,(0,t.createElement)("h3",null,"Gutenify Demos")),(0,t.createElement)("button",{onClick:()=>{_({}),E(!0)}},(0,t.createElement)(o.Icon,{icon:"update"})," Refresh")),(0,t.createElement)("div",{className:"gutenify-demo-importer-content"},(0,t.createElement)("div",{className:"gutenify-demo-importer-sidebar"},(0,t.createElement)("h3",null,"Type"),(0,t.createElement)("ul",null,(0,t.createElement)("li",null,(0,t.createElement)("label",{htmlFor:"type-all"},(0,t.createElement)("input",{name:"demoType[]",type:"radio",value:"all",id:"type-all",onChange:()=>{D({type:"all"})},checked:(null==H?void 0:H.type)&&"all"===H.type})," All")),(0,t.createElement)("li",null,(0,t.createElement)("label",{htmlFor:"type-pro"},(0,t.createElement)("input",{name:"demoType[]",type:"radio",value:"pro",id:"type-pro",onChange:()=>{D({type:"pro"})},checked:(null==H?void 0:H.type)&&"pro"===H.type})," Pro")),(0,t.createElement)("li",null,(0,t.createElement)("label",{htmlFor:"type-free"},(0,t.createElement)("input",{name:"demoType[]",type:"radio",value:"free",id:"type-free",onChange:()=>{D({type:"free"})},checked:(null==H?void 0:H.type)&&"free"===H.type})," Free"))),(0,t.createElement)("h3",null,"Cateogory"),(0,t.createElement)("ul",null,d.map((e=>(0,t.createElement)("li",{key:`cat-${e.term_id}`},(0,t.createElement)("label",{htmlFor:`cat-$${e.slug}`},(0,t.createElement)("input",{name:"demoCat[]",type:"checkbox",value:e.slug,id:`cat-$${e.slug}`,onClick:t=>{let n=null!=H&&H.cat?H.cat:[];t.target.checked?n.includes(e.slug)||n.push(e.slug):t.target.checked||(n=n.filter((t=>t!==e.slug))),D({cat:[...n]})}})," ",e.name)))))),(0,t.createElement)("div",{className:"gutenify-demo-importer-demo-list "+(!m||m.length<1?"gutenify-demo-importer-no-demo-list":"gutenify-demo-importer-has-demo-list")},m&&m.map((e=>(0,t.createElement)("div",{key:`theme-${e.name}`,className:"gutenify-demo-importer-demo-item "+(e.is_pro?"gutenify-demo-importer-demo-item-pro":"gutenify-demo-importer-demo-item-free")},(0,t.createElement)("div",{className:"gutenify-demo-importer-demo-thumb"},(0,t.createElement)("button",{onClick:()=>{},className:"gutenify-demo-importer-demo-thumbnail"},(0,t.createElement)("img",{src:`https://raw.githubusercontent.com/gutenify/demo-content/main/themes/${e.name}/screenshot.png`,alt:e.name,width:"100"})),(0,t.createElement)("div",{className:"gutenify-demo-importer-demo-overlay"},(0,t.createElement)("a",{href:`https://demo.gutenify.com/?demo=${e.name}`,className:"gutenify-demo-importer-demo-view-detail",target:"__blank"},(0,r.__)("Demo")))),(0,t.createElement)("div",{className:"gutenify-demo-importer-demo-buttons"},(0,t.createElement)("button",{onClick:()=>{},className:"gutenify-demo-importer-demo-title"},e.title),(0,t.createElement)("button",{onClick:()=>{F(e.name),T(e),!e.is_pro||e.is_pro&&u?(async e=>{if(O(!0),null!=e&&e.required_plugins){let t=[];e.required_plugins.forEach((async(n,o)=>{const r=l()({path:`/wp/v2/plugins/${n.main_file}`}).then((async t=>{e.required_plugins[o].status=t.status})).catch((async t=>{e.required_plugins[o].status=t.code}));t=[...t,r]})),await Promise.all([...t])}O(!1),T(e),b(!0)})(e):x(!0)},disabled:y,className:"gutenify-demo-importer-demo-item-download"},(0,t.createElement)("span",null,(0,t.createElement)(o.Icon,{icon:"download"}))))))),(!m||m.length<1)&&(0,t.createElement)("div",{className:"gutenify-demo-importer-demo-list"},"No demo found! ",null!=H&&H.cat?"Please try another filter.":""))),f&&(0,t.createElement)(o.Modal,{title:(0,r.__)("This is my modal"),onRequestClose:w,__experimentalHideHeader:!0,isDismissible:!1,shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"gutenify-demo-importer-popup gutenify-demo-importer-popup-step-1"},(0,t.createElement)("ul",{className:"import-steps"},(0,t.createElement)("li",null,(0,t.createElement)("span",{className:"import-step-active"},"1")),(0,t.createElement)("li",null,(0,t.createElement)("span",null,"2")),(0,t.createElement)("li",null,(0,t.createElement)("span",null,"3"))),(0,t.createElement)("div",{className:"gutenify-demo-importer-popup-content"},(0,t.createElement)("h2",null,(0,r.__)("Importing following:")),(0,t.createElement)("ul",null,(0,t.createElement)("li",null,(0,t.createElement)(o.Icon,{icon:"arrow-right"})," ",(0,r.__)("Demo content and images.")),(0,t.createElement)("li",null,(0,t.createElement)(o.Icon,{icon:"arrow-right"})," ",(0,r.__)("Global settings and styles")),(0,t.createElement)("li",null,(0,t.createElement)(o.Icon,{icon:"arrow-right"})," ",(0,r.__)("Plugin settings and styles"))),(null==q?void 0:q.required_plugins)&&q.required_plugins.length>0&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("h2",null,(0,r.__)("Following plugins will be installed:")),(0,t.createElement)("ul",null,q.required_plugins.map((e=>(0,t.createElement)("li",{key:`plugin-${e.name}`},(0,t.createElement)(o.Icon,{icon:"arrow-right"})," ",e.name))))),(0,t.createElement)("small",null,(0,t.createElement)("strong",null,"Note:")," Demo import works perfectly in new setup. you might run into minor issues in old setup."),(0,t.createElement)("br",null),(0,t.createElement)("small",null,(0,t.createElement)("strong",null,"Warning:")," Please backup your site before importing demo.")),(0,t.createElement)("div",{className:"gutenify-demo-importer-popup-btns"},(0,t.createElement)("button",{onClick:()=>{w()},variant:"secondary"},(0,r.__)("Cancel")),(0,t.createElement)("button",{onClick:()=>{w(),k(!0),(async e=>{await(async()=>{if(null!=q&&q.required_plugins){let e=[];for(let t=0;t<q.required_plugins.length;t++){const n=q.required_plugins[t];if(null!=n&&n.status&&"rest_plugin_not_found"===n.status){const t=await l()({path:"/wp/v2/plugins",method:"POST",data:{slug:n.slug,status:"active"}}).then((()=>{})).catch((()=>{}));e=[...e,t]}if(null!=n&&n.status&&"inactive"===n.status){const t=await l()({path:`/wp/v2/plugins/${n.main_file}`,method:"POST",data:{status:"active"}}).then((()=>{})).catch((()=>{}));e=[...e,t]}}}return!1})(),A(I)})()},variant:"primary"},(0,r.__)("Start import")))),v&&(0,t.createElement)(o.Modal,{title:(0,r.__)("This is my modal"),onRequestClose:C,__experimentalHideHeader:!0,isDismissible:!1,shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"gutenify-demo-importer-popup gutenify-demo-importer-popup-step-2"},(0,t.createElement)("ul",{className:"import-steps"},(0,t.createElement)("li",{className:"import-step-completed"},(0,t.createElement)("span",null,(0,t.createElement)(o.Icon,{icon:"yes-alt"}))),(0,t.createElement)("li",null,(0,t.createElement)("span",{className:"import-step-active"},"2")),(0,t.createElement)("li",null,(0,t.createElement)("span",null,"3"))),(0,t.createElement)("div",{className:"gutenify-demo-importer-popup-content"},(0,t.createElement)(o.Spinner,null),(0,t.createElement)("h2",null,(0,r.__)("Importing demo. Please wait")))),N&&(0,t.createElement)(o.Modal,{title:(0,r.__)("This is my modal"),onRequestClose:C,__experimentalHideHeader:!0,isDismissible:!1,shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"gutenify-demo-importer-popup gutenify-demo-importer-popup-step-3"},(0,t.createElement)("ul",{className:"import-steps"},(0,t.createElement)("li",null,(0,t.createElement)("span",{className:"import-step-completed"},(0,t.createElement)(o.Icon,{icon:"yes-alt"}))),(0,t.createElement)("li",null,(0,t.createElement)("span",{className:"import-step-completed"},(0,t.createElement)(o.Icon,{icon:"yes-alt"}))),(0,t.createElement)("li",null,(0,t.createElement)("span",{className:"import-step-active"},"3"))),(0,t.createElement)("div",{className:"gutenify-demo-importer-popup-content"},(0,t.createElement)(o.Icon,{icon:"yes-alt"}),(0,t.createElement)("h2",null,(0,r.__)("Demo imported successfully"))),(0,t.createElement)("div",{className:"gutenify-demo-importer-popup-btns"},(0,t.createElement)("button",{onClick:()=>{C(),S(!1),window.location.reload()},variant:"primary"},(0,r.__)("Close")),(0,t.createElement)(o.Button,{href:p,target:"__blank"},(0,r.__)("View Site")))),$&&(0,t.createElement)(o.Modal,{title:(0,r.__)("This is my modal"),onRequestClose:C,__experimentalHideHeader:!0,isDismissible:!1,shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"gutenify-demo-importer-loader-popup"},(0,t.createElement)("div",{className:"gutenify-demo-importer-popup-content"},(0,t.createElement)(o.Spinner,null))),P&&(0,t.createElement)(o.Modal,{title:(0,r.__)("This is my modal"),onRequestClose:w,__experimentalHideHeader:!0,isDismissible:!1,shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"gutenify-pro-demo-popup"},(0,t.createElement)("div",{className:"gutenify-pro-demo-popup-content"},(0,t.createElement)("h2",null,(0,r.__)("Create amazing site with our Premium demo and features :")),(0,t.createElement)("div",{className:"gutenify-pro-demo-popup-section"},(0,t.createElement)(o.Button,{href:"https://gutenify.com/pricing",target:"__blank",className:"gutenify-pro-demothumbnail"},(0,t.createElement)("img",{src:`https://raw.githubusercontent.com/gutenify/demo-content/main/themes/${q.name}/screenshot.png`,alt:q.name,width:"100"})),(0,t.createElement)("ul",null,(0,t.createElement)("li",null,(0,t.createElement)(o.Icon,{icon:"arrow-right"})," ",(0,r.__)("All premium demo")),(0,t.createElement)("li",null,(0,t.createElement)(o.Icon,{icon:"arrow-right"})," ",(0,r.__)("All premium blocks")),(0,t.createElement)("li",null,(0,t.createElement)(o.Icon,{icon:"arrow-right"})," ",(0,r.__)("All premium patterns")),(0,t.createElement)("li",null,(0,t.createElement)(o.Icon,{icon:"arrow-right"})," ",(0,r.__)("Priority support"))))),(0,t.createElement)("div",{className:"gutenify-pro-demo-popup-btns"},(0,t.createElement)("button",{onClick:()=>{x(!1)},variant:"secondary"},(0,r.__)("Cancel")),(0,t.createElement)(o.Button,{href:"https://gutenify.com/pricing",target:"__blank"},(0,r.__)("Get Pro")))))}),null),document.getElementById("gutenify-demo-importer-app"))})();